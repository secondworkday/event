<md-content>

  <section layout="row" class="md-padding">
    <div layout flex>
      <md-input-container flex style="margin-bottom:0;">
        <label><i class="fa fa-search"></i> Search occupations</label>
          <input
            ng-model="searchViewOptions.userSearch"
            ng-minlength="2"
            ng-model-options="{ debounce: 250 }">
      </md-input-container>
    </div>
    <div style="margin-top:1.25rem;">
      <md-menu>
        <md-button aria-label="Open sort menu" ng-click="$mdOpenMenu()">
          <i md-menu-origin class="fa fa-filter"></i> Filter
        </md-button>
        <md-menu-content width="4">
          <md-menu-item ng-repeat="option in filterOptions">
            <md-button ng-click="searchViewOptions.filter = option">
              <span ng-show="option.name == 'Green'"><i class="fa fa-circle text-green"></i> &nbsp;</span>
              <span ng-show="option.name == 'Yellow'"><i class="fa fa-circle text-yellow"></i> &nbsp;</span>
              <span ng-show="option.name == 'Red'"><i class="fa fa-circle text-red"></i> &nbsp;</span>
              {{option.name}}
            </md-button>
          </md-menu-item>
        </md-menu-content>
      </md-menu>
      <md-menu>
        <md-button aria-label="Open sort menu" ng-click="$mdOpenMenu()">
          <i md-menu-origin class="fa fa-sort"></i> Sort
        </md-button>
        <md-menu-content width="4">
          <md-menu-item ng-repeat="option in sortOptions">
            <md-button ng-click="searchViewOptions.sort = option">
              {{option.name}}
            </md-button>
          </md-menu-item>
        </md-menu-content>
      </md-menu>
    </div>
  </section>

  <section layout>
    <div flex layout style="height:1800px;overflow-y:scroll;" id="occupations-container">

      <ms-search-view flex change-event="updateOccupations" search="searchOccupations" options="searchViewOptions" container="'#occupations-container'">

        <md-list>
          <md-subheader class="md-no-sticky">Occupations</md-subheader>
          <md-list-item class="md-2-line secondary-button-padding"
            ng-click="doPrimaryAction($event)"
            ng-repeat="occupation in $displayedIndex | objectLookup:$hashMap track by occupation.code"
            ui-sref=".occupation({occupationCode:occupation.code})">
            <p layout layout-align="start center">
              <span ng-show="occupation.releaseState === 'Green'" class="u-sm-margin-right"><i class="fa fa-circle text-green"></i></span>
              <span ng-show="occupation.releaseState === 'Yellow'" class="u-sm-margin-right"><i class="fa fa-circle text-yellow"></i></span>
              <span ng-show="occupation.releaseState === 'Red'" class="u-sm-margin-right"><i class="fa fa-circle text-red"></i></span>
              <span ng-show="occupation.releaseState === 'Undefined'" class="u-sm-margin-right"><i class="fa fa-question-circle text-hint"></i></span>
              <span ng-show="occupation.isHeroImageInherited" class="u-sm-margin-right">
                <md-tooltip>Inherited Image</md-tooltip>
                <i class="fa fa-exclamation-triangle text-orange"></i>
              </span>
              <span class="u-sm-margin-right"
                    style="background-image: url('{{occupation.heroImageUrl}}');
                          background-size:cover;
                          background-position: {{occupation.heroImageFocusPointXPercent}}% {{occupation.heroImageFocusPointYPercent}}%;
                          display: inline-block;
                          height: 35px;
                          width: 35px;
                          border-radius: 50%;">
              </span>
              <span style="line-height:1.5">
                <span class="md-subhead">{{occupation.title | limitTo:40}}<span ng-show="occupation.title.length > 39">&hellip;</span></span>
                <br/>
                <span class="md-caption">SOC: {{occupation.code}} &middot; Employment: {{occupation.totalEmployment | number}}</span>
              </span>
            </p>
            <md-button ng-disabled="true" class="md-secondary md-icon-button" aria-label="upload photo"
              ng-click="doSecondaryAction($event, occupation)">
              <i class="fa fa-camera"></i>
            </md-button>
          </md-list-item>
        </md-list>

      </ms-search-view>

    </div>
    <div flex>

      <div ui-view></div>

    </div>
  </section>


</md-content>



<!--


    <div flex="45">
      <div layout layout-padding>
        <div flex>
          <md-input-container style="margin-top:-1rem;">
            <label><i class="fa fa-search"></i> Search</label>
            <input ng-model="userSearch">
          </md-input-container>
        </div>
        <div style="margin-top:1rem;">
          <md-menu>
            <md-button aria-label="Open sort menu" class="md-icon-button" ng-click="$mdOpenMenu()">
              <i md-menu-origin class="fa fa-filter"></i>
            </md-button>
            <md-menu-content width="4">
              <md-menu-item ng-repeat="option in filterOptions">
                <md-button ng-click="searchViewOptions.filter = option">
                  <span ng-show="option.name == 'Green'"><i class="fa fa-circle text-green"></i> &nbsp;</span>
                  <span ng-show="option.name == 'Yellow'"><i class="fa fa-circle text-yellow"></i> &nbsp;</span>
                  <span ng-show="option.name == 'Red'"><i class="fa fa-circle text-red"></i> &nbsp;</span>
                  {{option.name}}
                </md-button>
              </md-menu-item>
            </md-menu-content>
          </md-menu>
          <md-menu>
            <md-button aria-label="Open sort menu" class="md-icon-button" ng-click="$mdOpenMenu()">
              <i md-menu-origin class="fa fa-sort"></i>
            </md-button>
            <md-menu-content width="4">
              <md-menu-item ng-repeat="option in sortOptions">
                <md-button ng-click="searchViewOptions.sort = option">
                  {{option.name}}
                </md-button>
              </md-menu-item>
            </md-menu-content>
          </md-menu>
          <md-button aria-label="batch update" class="md-icon-button" ng-click="showLibraryBatchUpdateDialog()">
            <md-tooltip>Batch update</md-tooltip>
            <i class="fa fa-file"></i>
          </md-button>
        </div>
      </div>

      <section id="masterlist" style="max-height:2400px;overflow:scroll;">
        <ms-search-view change-event="updateOccupations" search="searchOccupations" options="searchViewOptions" user-search="userSearch" container="'#masterlist'">
          <div layout layout-margin  style="margin-bottom:1rem;cursor:pointer;"
                ng-repeat="occupation in $displayedIndex | objectLookup:$hashMap track by occupation.code"
                ui-sref=".occupation({occupationID:occupation.code})">
            <div flex="25" layout layout-align="center center">
              <img  alt="{{occupation.displayTitle}}"  style="width:100%;height:100%;"
                    ng-src="{{occupation.heroImageUrl || 'no image available'}}"/>
            </div>
            <div flex layout layout-align="start center">
              <p>
                <span class="md-body-2">{{occupation.displayTitle}}</span><br/>
                <span class="md-caption">
                  SOC: {{occupation.occupationCode.Code}}<br/>
                  Employment: {{occupation.totalEmployment | number}}<br/>
                  <span ng-show="occupation.isHeroImageInherited" aria-label="inherited image"><i class="fa fa-exclamation-triangle text-red"></i> Inherited &middot; </span>
                </span>
              </p>
              <div ms-debug-only><pre>{{ occupation | json }}</pre></div>
            </div>
            <div flex="5" layout layout-align="center center">
              <span ng-show="occupation.releaseState === 'Green'" class="md-secondary"><i class="fa fa-circle text-green"></i></span>
              <span ng-show="occupation.releaseState === 'Yellow'" class="md-secondary"><i class="fa fa-circle text-yellow"></i></span>
              <span ng-show="occupation.releaseState === 'Red'" class="md-secondary"><i class="fa fa-circle text-red"></i></span>
              <span ng-hide="occupation.releaseState" class="md-secondary"><i class="fa fa-circle" style="color:rgba(0,0,0,.15);"></i></span>
            </div>
          </div>
        </ms-search-view>
      </section>
    </div>
    <span flex="5"></span>
    <div flex="50" ui-view></div>
  </md-content> -->
